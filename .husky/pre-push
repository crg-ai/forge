#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# åœ¨æ¨é€å‰è¿è¡Œå®Œæ•´çš„è´¨é‡æ£€æŸ¥
echo "ğŸ” Running pre-push checks..."

# 1. è¿è¡Œæµ‹è¯•
echo "ğŸ“¦ Running tests..."
npm run test:run || {
  echo "âŒ Tests failed. Push aborted."
  exit 1
}

# 2. æ£€æŸ¥ç±»å‹
echo "ğŸ”¤ Checking TypeScript types..."
npm run typecheck || {
  echo "âŒ Type check failed. Push aborted."
  exit 1
}

# 3. è¿è¡Œ lint
echo "âœ¨ Running linter..."
npm run lint || {
  echo "âŒ Linting failed. Push aborted."
  exit 1
}

# 4. å°è¯•æ„å»º
echo "ğŸ—ï¸ Building project..."
npm run build || {
  echo "âŒ Build failed. Push aborted."
  exit 1
}

echo "âœ… All pre-push checks passed!"